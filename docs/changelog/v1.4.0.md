## [1.4.0] - 2025-01-03

### Added
- **Edit Mask Loss Support**: Implemented mask-based loss function to improve image editing training effectiveness
  - 新增 `MaskEditLoss` 类，支持对编辑区域和背景区域的差异化权重
  - 实现 `map_mask_to_latent` 函数，将图像空间掩码映射到潜在空间序列权重
  - 支持可配置的前景权重 (`foreground_weight`) 和背景权重 (`background_weight`)
  - 完全向后兼容，现有训练管道在 `mask_loss: false` 时保持不变

### Changed
- **Dataset Support**: Extended dataset structure to support optional edit mask files (`*_mask.png`)
- **Configuration System**: Added `loss.mask_loss`, `loss.foreground_weight`, `loss.background_weight` configuration options
- **Training Effectiveness**: Improved model convergence speed and quality in key editing regions through focused loss computation

### Technical Details
- Mask processing pipeline: Image space → VAE downsampling → 2×2 patch merging → Latent space sequence alignment
- Dual loss computation: Combination of original loss + mask-weighted loss
- Support for joint application of timestep weights and mask weights
- Detailed implementation documentation: `docs/image_edit_mask_loss.md`

---
