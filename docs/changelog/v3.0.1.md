# Version 3.0.1

**Release Date**: 2025-10-25

## Overview

This is a patch release that includes bug fixes, test infrastructure improvements, dependency updates, and enhanced test resources management. No breaking changes or new features are introduced.

## Changes

### üîß Bug Fixes

- **E2E Test Resolution**: Fixed issues in end-to-end testing pipeline
- **Pre-commit Hook Fixes**: Resolved pre-commit configuration issues

### üß™ Testing Improvements

- **Test Resources Management**: Comprehensive refactor of test resources infrastructure
  - Migrated test resources to HuggingFace Hub for centralized management
  - Added automatic resource downloading system with on-demand fetching
  - Introduced `tests/resources_config.yaml` for resource group definitions
  - Created `tests/utils/test_resources.py` helper for resource management
  - Added `scripts/upload_test_resources.py` for resource uploads
  - Documentation: `docs/guide/test_resources_management.md`

- **New E2E Tests**: Added comprehensive end-to-end tests
  - `tests/e2e/test_qwen_image_edit_sampling.py` - Qwen-Image-Edit sampling tests
  - `tests/e2e/test_qwen_image_edit_plus_sampling.py` - Qwen-Image-Edit-Plus sampling tests
  - Enhanced test coverage for Qwen model architectures

- **Test Resources Structure**: Reorganized test resources
  - Added `qwen_sampling/` resources for Qwen-Image-Edit tests
  - Added `qwen_plus_sampling/` resources for Qwen-Image-Edit-Plus tests
  - Maintained existing Flux-related test resources

- **Testing Documentation**:
  - `docs/guide/testing.md` - Complete unified testing guide (merged from 4 separate docs)
  - `tests/TEST_DATA_README.md` - Test data usage guide
  - `tests/utils/README.md` - Testing utilities documentation

### üì¶ Dependencies

- **diffusers**: Updated requirements for improved compatibility
- Updated dependency versions in `requirements.txt`

### üèóÔ∏è Infrastructure

- **Pre-commit Configuration**: Added `.pre-commit-config.yaml` with automated checks
- **Project Structure**: Enhanced organization for better maintainability

### üìù Documentation

- **Restructured Documentation**:
  - Moved files to proper directories (guide, spec, plan, references)
  - Enhanced README with clearer structure
  - Improved consistency across documentation files

## Migration Guide

### Test Resources

If you have existing test resources:

1. **Automatic Download**: Resources are now automatically downloaded from HuggingFace when needed
2. **No Manual Setup**: Tests will fetch required resources on first run
3. **Cache Location**: Resources download to `tests/resources/` automatically

### Import Paths

No changes to import paths in this release. All imports remain under `src.qflux.*`.

## Files Changed

### Added
- `tests/e2e/test_qwen_image_edit_sampling.py`
- `tests/e2e/test_qwen_image_edit_plus_sampling.py`
- `tests/resources_config.yaml`
- `tests/utils/test_resources.py`
- `tests/utils/data_loader.py`
- `scripts/upload_test_resources.py`
- `docs/guide/testing.md`
- `.pre-commit-config.yaml`

### Modified
- `requirements.txt` - Updated diffusers and other dependencies
- `tests/conftest.py` - Enhanced with resource management
- Test configuration files updated for better reliability

### Removed
- Large binary test resources from git (moved to HuggingFace)

## Testing

All existing tests pass with the new resource management system:

```bash
# Run all tests (resources auto-download)
pytest

# Run specific test suites
pytest tests/e2e/test_qwen_image_edit_sampling.py
pytest tests/e2e/test_flux_sampling.py
```

## Contributors

This release includes contributions from the core development team.

## Notes

- This is a maintenance release focused on improving test infrastructure
- No user-facing API changes
- Recommended for all users on v3.0.0 for improved test reliability
- Test resources are now hosted at: https://huggingface.co/datasets/TsienDragon/qwen-image-finetune-test-resources

## Next Steps

See [docs/TODO.md](../TODO.md) for upcoming features and improvements.
