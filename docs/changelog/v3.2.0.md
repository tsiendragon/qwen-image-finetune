# v3.2.0 Release Notes

## Overview

Version 3.2.0 introduces unified multi-logger support, providing a flexible interface for experiment tracking across TensorBoard, Weights & Biases, and SwanLab. This major enhancement enables seamless switching between logging backends without code changes, while maintaining full backwards compatibility.

## New Features

### Multi-Logger Support

- **Unified Interface**: Single `LoggerManager` API works with TensorBoard, Weights & Biases (wandb), and SwanLab
- **Easy Switching**: Change logging backends by modifying one config parameter (`report_to`)
- **Automatic Authentication**: API keys loaded from `.env` file with automatic login
- **Distributed Training**: Automatic process coordination, only main process logs metrics
- **Rich Logging**: Support for scalars, images, text, and tables across all backends

#### Configuration

```yaml
logging:
  output_dir: "./output/experiment"
  report_to: "tensorboard"  # or "wandb" or "swanlab"
  tracker_project_name: "my-project"
  tags:
    - experiment
    - lora
  notes: "Experiment description"
```

#### Authentication

For wandb/swanlab, create `.env` file:
```bash
WANDB_API_KEY=your_api_key
SWANLAB_API_KEY=your_api_key
```

See [Logging Guide](../guide/logging.md) for detailed usage.

## Technical Implementation

### Core Components

- **LoggerManager**: Central logging coordinator that dispatches to appropriate backend
- **BaseLogger**: Abstract interface implemented by each backend
- **Backend Implementations**: TensorBoardLogger, WandbLogger, SwanLabLogger
- **Automatic Detection**: Selects appropriate logger based on config
- **Graceful Fallbacks**: Continues training even if logging fails

### Integration

- Integrated into `BaseTrainer` for automatic setup
- Works with all trainer types (QwenImageEdit, QwenImageEditPlus, FluxKontext)
- Compatible with validation sampling visualization
- Supports distributed training with automatic rank handling

### API Examples

```python
# Log scalars
self.logger_manager.log_scalar("train/loss", loss, step=step)

# Log multiple scalars
self.logger_manager.log_scalars({
    "train/loss": loss,
    "train/lr": lr
}, step=step)

# Log images
self.logger_manager.log_image("validation/sample", image, step=step)

# Log multiple images as grid
self.logger_manager.log_images("validation/batch", images, step=step, nrow=4)

# Log text
self.logger_manager.log_text("info/prompt", prompt_text, step=step)

# Log tables
self.logger_manager.log_table("metrics/summary", data, step=step)

# Flush logs
self.logger_manager.flush()
```

## Migration Guide

### Backwards Compatibility

Existing configs continue to work without changes. The framework automatically initializes appropriate loggers based on accelerate tracker configuration.

### Recommended Migration

For new experiments, use the new unified interface:

**Before:**
```python
writer = accelerator.get_tracker("tensorboard").writer
writer.add_scalar("loss", loss, step)
writer.add_image("sample", image, step)
```

**After:**
```python
self.logger_manager.log_scalar("loss", loss, step)
self.logger_manager.log_image("sample", image, step)
```

### Benefits of Migration

1. **Backend Agnostic**: Switch between TensorBoard, wandb, SwanLab without code changes
2. **Consistent API**: Same methods work across all backends
3. **Automatic Handling**: Process coordination, error handling, fallbacks
4. **Type Safety**: Better IDE support and type checking

## Dependencies

Added new optional dependencies:
- `wandb`: For Weights & Biases support
- `swanlab`: For SwanLab support

These are only required if using the respective backends.

## Documentation

- Added comprehensive [Logging Guide](../guide/logging.md)
- Includes configuration examples, troubleshooting, and best practices
- Visual examples for all three logger backends

## Testing

- Unit tests for LoggerManager
- Integration tests with all three backends
- Distributed training compatibility verified

## Breaking Changes

None. This is a backwards-compatible addition (MINOR version bump).

## Future Enhancements

- Additional backend support (MLflow, Neptune.ai)
- Custom logger plugins
- Advanced visualization options
- Metric aggregation and comparison tools
