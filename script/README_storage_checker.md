# 存储设备检测脚本

## 功能描述

`check_storage.py` 是一个用于检测存储设备类型、性能和稳定性的综合测试工具。

## 主要功能

1. **设备类型检测**
   - 自动识别 SSD 或 HDD
   - 通过系统文件和 lsblk 命令检测

2. **性能测试**
   - 顺序读写速度测试
   - 随机 I/O 性能测试（IOPS 和延迟）
   - 多轮稳定性测试

3. **稳定性评估**
   - 多轮测试计算变异系数
   - 性能稳定性等级评定

## 使用方法

### 基本用法
```bash
# 测试当前目录所在的存储设备
python3 script/check_storage.py

# 测试指定路径的存储设备
python3 script/check_storage.py --path /data

# 快速测试模式（较小文件）
python3 script/check_storage.py --quick
```

### 参数说明
- `--path/-p`: 指定测试路径（默认当前目录）
- `--quick/-q`: 快速测试模式，使用较小的测试文件
- `--help/-h`: 显示帮助信息

## 测试项目

1. **基本信息**
   - 磁盘容量、使用情况
   - 挂载点和设备名

2. **顺序性能**
   - 顺序读取速度 (MB/s)
   - 顺序写入速度 (MB/s)

3. **随机I/O性能**
   - 平均访问延迟 (ms)
   - IOPS (每秒操作次数)
   - 延迟稳定性

4. **稳定性测试**
   - 多轮性能测试
   - 变异系数计算
   - 稳定性等级评定

## 性能等级标准

### SSD 性能标准
- **读取速度**: 优秀(>400MB/s) | 良好(>200MB/s) | 一般(>100MB/s)
- **写入速度**: 优秀(>300MB/s) | 良好(>150MB/s) | 一般(>50MB/s)
- **IOPS**: 优秀(>5000) | 良好(>2000) | 一般(>500)

### HDD 性能标准
- **读取速度**: 优秀(>120MB/s) | 良好(>80MB/s) | 一般(>40MB/s)
- **写入速度**: 优秀(>100MB/s) | 良好(>60MB/s) | 一般(>30MB/s)
- **IOPS**: 优秀(>150) | 良好(>100) | 一般(>50)

### 稳定性等级
- **优秀**: 变异系数 < 5%
- **良好**: 变异系数 < 10%
- **一般**: 变异系数 < 20%
- **较差**: 变异系数 ≥ 20%

## 注意事项

1. 脚本会创建临时测试文件，需要目标路径的写入权限
2. 测试过程中会消耗一定的磁盘I/O，建议在非高负载时运行
3. 测试结果可能受到系统缓存、其他程序等因素影响
4. 对于生产环境，建议使用 `--quick` 选项减少测试时间

## 依赖要求

- Python 3.6+
- psutil 库
- Linux 系统环境
- 基本的系统工具 (df, lsblk, sync)
